<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:gc="http://xmlns.jcp.org/jsf/composite/gc">
<ui:composition template="../template/template.xhtml">
<ui:define name="content">
<style>.vacio{display:none}</style>
<h:form id="idFormAgregarAcuerdo" class="form-horizontal">
<h:messages globalOnly="false" />
<input type="hidden" id="idUsuarioSession" jsf:value="#{actaAcuerdoController.actaAcuerdoDetalle.usuarioRegistro}" />
<style>#project-label{display:block;font-weight:bold;margin-bottom:1em}#project-icon{float:left;height:32px;width:32px}#project-description{margin:0;padding:0}</style>
<script>var usu=JSON.parse(sessionStorage.getItem("userSesion"));$("#idUsuarioSession").val(usu.codigo);</script>
<gc:confirmSubmit bean="#{actaAcuerdoController.registrarActaAcuerdoxActividad2(registroController.actividadTemp.id)}" />
<div class="panel panel-default" style="width:100%;margin:auto;background:#F5F5F5">
<div class="panel-heading">
<table style="width:100%">
<tr>
<td style="vertical-align:top">
<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" style="float:left">
<span id="idImagen" class="glyphicon glyphicon-minus" style="font-size:large"></span>
</a><span class="text-resalt-primary">Detalle General</span>
</td>
<td style="text-align:right">
<a class="btn btn-danger" jsf:action="seguimientoAcuerdo" jsf:immediate="true">
<span class="glyphicon glyphicon-share"/>Regresar
</a>
</td>
</tr>
</table>
</div>
<h:inputHidden value="#{actaAcuerdoController.actaAcuerdo.id}" />
<div id="collapseOne" class="panel-collapse collapse in">
<div class="panel-body">
<table style="width:100%">
<tr>
<td style="width:50%;padding-right:5px">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Fecha en que se tomaron los acuerdos/compromisos</span>
</td>
<td style="padding-left:5px">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Tipo de Registro</span>
</td>
</tr>
<tr>
<td>
<div class="input-group datepicker" id="idDivTxtFechaRegistro">
<div class="input-group-addon add-on">
<span class="glyphicon glyphicon-calendar"></span>
</div>
<input type="text" id="txtFechaRegistro" data-format="dd/MM/yyyy" jsf:value="#{actaAcuerdoController.actaAcuerdo.fechaRegistro}" style="width:40%">
<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
</input>
</div>
</td>
<td>
<div id="idDivCmbTipoRegistro">
<h:selectOneMenu id="cmbTipoRegistro" value="#{actaAcuerdoController.actaAcuerdo.tipo}">
<f:selectItems value="#{listasComunesController.buscarTipoActaAcuerdo(false,false,true)}" var="y" itemLabel="#{y.nombreParametro}" itemValue="#{y.valorParametro}" />
</h:selectOneMenu>
</div>
</td>
</tr>
<tr>
<td>
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Descripción general</span>
</td>
<td>
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Comentarios</span>
</td>
</tr>
<tr>
<td>
<div id="idDivTxtDescripcionItem">
<textarea id="txtDescripcionItem" rows="3" jsf:value="#{actaAcuerdoController.actaAcuerdo.descripcionItem}" style="width:100%;height:170px"/>
</div>
</td>
<td>
<div id="idDivTxtComentario">
<textarea id="txtComentario" rows="3" jsf:value="#{actaAcuerdoController.actaAcuerdo.comentario}" style="width:100%;height:170px"/>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<br/>
<h:panelGroup id="idPanelDetalleAcuerdo" rendered="#{actaAcuerdoController.actaAcuerdo.id != null}">
<table style="width:100%">
<tr>
<td style="width:33%;padding-right:2px" rowspan="2">
<h:panelGroup id="idpanel1">
<div class="panel panel-featured-top-primary" style="overflow-y:auto;height:330px">
<div class="panel-body">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">El/los siguientes actores</span>
<h:dataTable value="#{actorController.listaActorSeleccionadoAcuerdoIni}" var="actor" class="table table-striped" style="font-size:x-small">
<h:column>
<f:facet name="header">Nombre</f:facet>
<h:outputText value="#{actor.nombre} #{actor.apellidoPat} #{actor.apellidoMat}" />
</h:column>
</h:dataTable>
<br/>
</div>
</div>
</h:panelGroup>
</td>
<td style="width:33%;padding-right:2px;padding-left:2px" rowspan="2">
<div class="panel panel-featured-top-primary" style="height:330px">
<div class="panel-body">
<div id="idDivTxtDescripcion">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Acuerda(n)/ se compromete(n) a...</span>
<textarea id="txtDescripcion" jsf:value="#{actaAcuerdoController.actaAcuerdoDetalle.descripcion}" rows="3" style="width:100%;height:190px"/>
</div>
</div>
</div>
</td>
<td style="width:33%;padding-left:2px;vertical-align:top">
<div class="panel panel-featured-top-primary" style="height:100px">
<div class="panel-body">
<div>
<span class="text-primary" style="font-size:1.2em;font-weight:bold">A mas tardar el</span><br/>
<table style="width:100%">
<tr>
<td style="padding-right:2px;width:60%">
<div class="input-group datepicker" id="idDivTxtFechaCumplimiento">
<div class="input-group-addon add-on">
<span class="glyphicon glyphicon-calendar"></span>
</div>
<input type="text" id="txtFechaCumplimiento" data-format="dd/MM/yyyy" jsf:value="#{actaAcuerdoController.actaAcuerdoDetalle.fechaCumplimiento}" style="width:100%">
<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
</input>
</div>
</td>
<td>
<h:selectBooleanCheckbox id="checkIndCumplimientoBoolean" value="#{actaAcuerdoController.actaAcuerdoDetalle.indCumplimiento}" />
<span style="font-size:x-small">De cumplimiento inmediato</span>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td style="vertical-align:bottom;padding-left:2px">
<h:panelGroup id="idPanel2">
<div class="panel panel-featured-top-primary" style="overflow-y:auto;height:210px">
<div class="panel-body">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">En favor de</span>
<h:dataTable value="#{actorController.listaActorSeleccionadoAcuerdoFin}" var="actor1" class="table table-striped" id="idFormAgregarAcuerdo2" style="font-size:x-small">
<h:column>
<f:facet name="header">Nombre</f:facet>
<h:outputText value="#{actor1.nombre} #{actor1.apellidoPat} #{actor1.apellidoMat}" />
</h:column>
</h:dataTable>
</div>
</div>
</h:panelGroup>
</td>
</tr>
</table>
<br/>
<table style="width:100%">
<tr>
<td style="width:40%;padding-right:2px">
<div class="panel panel-featured-top-primary" style="overflow-y:auto;height:360px">
<div class="panel-body">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Responsable del seguimiento por parte del DP</span>
<br/>
<div class="panel panel-info" style="width:100%">
<div class="panel-heading">
<span class="glyphicon glyphicon-user"></span>
Miembros
<a style="text-decoration:none" id="addUser">
<span id="spanAddUser" class="glyphicon glyphicon-plus"></span>
</a>
</div>
<div id="idPanelBody" class="panel-body">
<h:dataTable value="#{busquedaUsuarioController.listaUsuario}" var="item" id="idDatatableActor" class="table table-striped" style="font-size:.8em;text-align:left">
<h:column id="colNombre">
<f:facet name="header">
<h:outputText value="Nombre"/>
</f:facet>
<h:outputText value="#{item.nombre} #{item.apellidoPaterno}"/>
</h:column>
<h:column id="colDni">
<f:facet name="header">
<h:outputText value="Documento"/>
</f:facet>
<h:outputText value="#{item.dni}"/>
</h:column>
</h:dataTable>
<ul class="pager">
<li>
<a jsf:action="#{busquedaUsuarioController.listarPaginado(busquedaUsuarioController.nroPagina -1)}" jsf:onclick="loadingModal()">Anterior
<f:ajax render="idDatatableActor" onevent="closeModal"/>
</a>
</li>
<li>
<a jsf:action="#{busquedaUsuarioController.listarPaginado(busquedaUsuarioController.nroPagina +1)}" jsf:onclick="loadingModal()">Siguiente
<f:ajax render="idDatatableActor" onevent="closeModal"/>
</a>
</li>
</ul>
</div>
<div class="panel-footer">
<center>
<h:dataTable value="#{actaAcuerdoController.listaActaAcuerdoDetalleMiembro}" var="miembro" style="text-align:left;width:100%;font-size:.8em" class="table table-striped">
<h:column>
<li>
<h:outputText value="#{miembro.nombre}" />
</li>
</h:column>
</h:dataTable>
</center>
</div>
</div>
</div>
</div>
<script>$("#idPanelBody").hide();$("#spanAddUser").removeClass("glyphicon-minus").addClass("glyphicon-plus");var i=1;$("#addUser").click(function(){if(i===1){$("#idPanelBody").slideDown(400).delay(800);$("#spanAddUser").removeClass("glyphicon-plus").addClass("glyphicon-minus");i=2}else{$("#idPanelBody").slideUp(300).delay(800);$("#spanAddUser").removeClass("glyphicon-minus").addClass("glyphicon-plus");i=1}});</script>
</td>
<td style="width:60%;padding-left:2px">
<div class="panel panel-featured-top-primary" style="overflow-y:auto;height:360px">
<div class="panel-body">
<span class="text-primary" style="font-size:1.2em;font-weight:bold">Alertas</span>
<br/>
<h:selectBooleanCheckbox id="checkIndAlertar" value="#{actaAcuerdoController.actaAcuerdoDetalle.indAlertar}" />No alertar
<div id="idDivAlert">
<table style="width:100%">
<tr>
<td style="width:10%">
<h:outputText value="Inicio" />
</td>
<td>
<table style="width:100%">
<tr>
<td style="width:8%">
<div id="idDivTxtNumeroInicial">
<input type="text" id="txtNumeroInicial" onkeypress="return soloNumbero(event)" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.numeroInicial}"/>
</div>
</td>
<td style="width:30%">
<div id="idDivSelTipoTiempoIni">
<h:selectOneMenu id="selTipoTiempoIni" value="#{actaAcuerdoController.seguimientoAcuerdo.tipoTiempoIni}">
<f:selectItems value="#{seguimientoAcuerdoController.listaTiempo}" var="y" itemLabel="#{y.label}" itemValue="#{y.value}" />
</h:selectOneMenu>
</div>
</td>
<td style="width:30%">
<div id="idDivSelIndicadorAntesDespuesIni">
<h:selectOneMenu id="selIndicadorAntesDespuesIni" value="#{actaAcuerdoController.seguimientoAcuerdo.indicadorAntesDespuesIni}">
<f:selectItems value="#{seguimientoAcuerdoController.listaAntesDespues}" var="y" itemLabel="#{y.label}" itemValue="#{y.value}" />
</h:selectOneMenu>
</div>
</td>
<td style="width:32%">
<div class="input-group datepicker" id="idDivTxtInicioSeguimiento">
<div class="input-group-addon add-on">
<span class="glyphicon glyphicon-calendar"></span>
</div>
<input type="text" id="txtInicioSeguimiento" data-format="dd/MM/yyyy" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.inicioSeguimiento}">
<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
</input>
</div>
</td>
</tr>
</table>
<table>
<tr>
<td style="width:5%">
<h:selectBooleanCheckbox id="checkIndicadorSeleccionHoraIni" value="#{actaAcuerdoController.seguimientoAcuerdo.indicadorSeleccionHoraIni}"/>
</td>
<td style="width:25%">
<div class="input-group datepicker" id="idDivTxtInicioDefinitivo">
<div class="input-group-addon add-on">
<span class="glyphicon glyphicon-calendar"></span>
</div>
<input type="text" id="txtInicioDefinitivo" data-format="dd/MM/yyyy" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.inicioDefinitivo}">
<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
</input>
</div>
</td>
<td style="width:70%"></td>
</tr>
</table>
</td>
</tr>
</table>
<br/>
<table style="width:100%">
<tr>
<td style="width:10%">
<h:outputText value="Finaliza" />
</td>
<td>
<table style="width:100%">
<tr>
<td style="width:8%">
<div id="idDivTxtNumeroFinal">
<input type="text" id="txtNumeroFinal" onkeypress="return soloNumbero(event)" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.numeroFinal}" />
</div>
</td>
<td style="width:30%">
<div id="idDivSelTipoTiempoFin">
<h:selectOneMenu id="selTipoTiempoFin" value="#{actaAcuerdoController.seguimientoAcuerdo.tipoTiempoFin}">
<f:selectItems value="#{seguimientoAcuerdoController.listaTiempo}" var="y" itemLabel="#{y.label}" itemValue="#{y.value}" />
</h:selectOneMenu>
</div>
</td>
<td style="width:30%">
<div id="idDivSelIndicadorAntesDespuesFin">
<h:selectOneMenu id="selIndicadorAntesDespuesFin" value="#{actaAcuerdoController.seguimientoAcuerdo.indicadorAntesDespuesFin}">
<f:selectItems value="#{seguimientoAcuerdoController.listaAntesDespues}" var="y" itemLabel="#{y.label}" itemValue="#{y.value}" />
</h:selectOneMenu>
</div>
</td>
<td style="width:32%">
<div class="input-group datepicker" id="idDivTxtFinSeguimiento">
<div class="input-group-addon add-on">
<span class="glyphicon glyphicon-calendar"></span>
</div>
<input type="text" data-format="dd/MM/yyyy" id="txtFinSeguimiento" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.finSeguimiento}">
<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
</input>
</div>
</td>
</tr>
</table>
<table>
<tr>
<td style="width:5%">
<h:selectBooleanCheckbox id="checkIndicadorSeleccionHoraFin" value="#{actaAcuerdoController.seguimientoAcuerdo.indicadorSeleccionHoraFin}"/>
</td>
<td style="width:25%">
<div class="input-group datepicker" id="idDivTxtFinDefinitivo">
<div class="input-group-addon add-on">
<span class="glyphicon glyphicon-calendar"></span>
</div>
<input type="text" id="txtFinDefinitivo" data-format="dd/MM/yyyy" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.finDefinitivo}">
<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
</input>
</div>
</td>
<td style="width:70%"></td>
</tr>
</table>
</td>
</tr>
</table>
<br/>
<table style="width:100%">
<tr>
<td style="width:10%">
<h:outputText value="Repetir" />
</td>
<td style="width:30%">
<div id="idDivSelIndiceRepeticion">
<h:selectOneMenu id="selIndiceRepeticion" value="#{actaAcuerdoController.seguimientoAcuerdo.indiceRepeticion}">
<f:selectItems value="#{seguimientoAcuerdoController.listaRepeticion}" var="y" itemLabel="#{y.label}" itemValue="#{y.value}" />
</h:selectOneMenu>
</div>
</td>
<td style="width:60%"></td>
</tr>
</table>
</div>
</div>
</div>
</td>
<td></td>
</tr>
<tr>
<td colspan="3">
<br/>
<div class="panel panel-featured-top-primary">
<div class="panel-body">
<span class="text-resalt-primary">Destinatarios adicionales - alertas via correo eléctronico</span>
<textarea id="txtOpcionales" jsf:value="#{actaAcuerdoController.seguimientoAcuerdo.opcionales}" rows="3" style="width:100%;height:190px"/>
</div>
</div>
</td>
</tr>
</table>
<br/>
</h:panelGroup>
<script type="text/javascript">function sumaDias(a,c){var b=converterFecha(a);return new Date(b.valueOf()+(c*24*3600*1000))}function converterFecha(a){var c=a.split("/");var b=new Date(parseInt(c[2],10),parseInt(c[1],10)-1,parseInt(c[0],10));return b}function soloNumbero(a){var b=window.event?window.event.keyCode:a.which;if((b===8)||(b===46)){return true}return/\d/.test(String.fromCharCode(b))}function comparaFechas(f,e){var d=f.getDate();var h=f.getMonth();var c=f.getFullYear();var b=e.getDate();var g=e.getMonth();var a=e.getFullYear();if(parseInt(c)>parseInt(a)){return 1}if(parseInt(a)>parseInt(c)){return 1}if(parseInt(c)===parseInt(a)){if(parseInt(h)>parseInt(g)){return 1}if(parseInt(g)>parseInt(h)){return 2}if(parseInt(h)===parseInt(g)){if(d>b){return 1}if(b>d){return 2}if(d===b){return 0}}}}$(document).ready(function(){var a=1;$("#idImagen").on("click",function(){$("#idImagen").removeClass();if(a===1){$("#idImagen").addClass("glyphicon glyphicon-plus");a=2}else{$("#idImagen").addClass("glyphicon glyphicon-minus");a=1}});$("#idFormAgregarAcuerdo\\:checkIndCumplimientoBoolean").on("click",function(){if($("#idFormAgregarAcuerdo\\:checkIndCumplimientoBoolean").is(":checked")){$("#txtFechaCumplimiento").attr("disabled",true).val("")}else{$("#txtFechaCumplimiento").removeAttr("disabled")}});if($("#idFormAgregarAcuerdo\\:checkIndAlertar").is(":checked")){$("#idDivAlert").addClass("vacio")}else{$("#idDivAlert").removeClass("vacio")}$("#idFormAgregarAcuerdo\\:checkIndAlertar").on("click",function(){if($("#idFormAgregarAcuerdo\\:checkIndAlertar").is(":checked")){$("#idDivAlert").addClass("vacio")}else{$("#idDivAlert").removeClass("vacio")}});if($("#idFormAgregarAcuerdo\\:checkIndCumplimientoBoolean").is(":checked")){$("#txtFechaCumplimiento").attr("disabled",true)}else{$("#txtFechaCumplimiento").removeAttr("disabled")}$("#txtFinDefinitivo").attr("disabled",true);$("#txtInicioDefinitivo").attr("disabled",true);if($("#idFormAgregarAcuerdo\\:checkIndicadorSeleccionHoraIni").is(":checked")){$("#idFormAgregarAcuerdo\\:selTipoTiempoIni").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selTipoTiempoIni option:eq(0)").prop("selected",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesIni").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesIni option:eq(0)").prop("selected",true);$("#txtNumeroInicial").attr("disabled",true).val("");$("#txtInicioSeguimiento").attr("disabled",true).val("");$("#txtInicioDefinitivo").removeAttr("disabled")}else{$("#idFormAgregarAcuerdo\\:selTipoTiempoIni").removeAttr("disabled");$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesIni").removeAttr("disabled");$("#txtNumeroInicial").removeAttr("disabled");$("#txtInicioSeguimiento").removeAttr("disabled");$("#txtInicioDefinitivo").attr("disabled",true).val("")}if($("#idFormAgregarAcuerdo\\:checkIndicadorSeleccionHoraFin").is(":checked")){$("#idFormAgregarAcuerdo\\:selTipoTiempoFin").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selTipoTiempoFin option:eq(0)").prop("selected",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesFin").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesFin option:eq(0)").prop("selected",true);$("#txtNumeroFinal").attr("disabled",true).val("");$("#txtFinSeguimiento").attr("disabled",true).val("");$("#txtFinDefinitivo").removeAttr("disabled")}else{$("#idFormAgregarAcuerdo\\:selTipoTiempoFin").removeAttr("disabled");$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesFin").removeAttr("disabled");$("#txtNumeroFinal").removeAttr("disabled");$("#txtFinSeguimiento").removeAttr("disabled");$("#txtFinDefinitivo").attr("disabled",true).val("")}$("#idFormAgregarAcuerdo\\:checkIndicadorSeleccionHoraIni").on("click",function(){if($("#idFormAgregarAcuerdo\\:checkIndicadorSeleccionHoraIni").is(":checked")){$("#idFormAgregarAcuerdo\\:selTipoTiempoIni").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selTipoTiempoIni option:eq(0)").prop("selected",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesIni").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesIni option:eq(0)").prop("selected",true);$("#txtNumeroInicial").attr("disabled",true).val("");$("#txtInicioSeguimiento").attr("disabled",true).val("");$("#txtInicioDefinitivo").removeAttr("disabled")}else{$("#idFormAgregarAcuerdo\\:selTipoTiempoIni").removeAttr("disabled");$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesIni").removeAttr("disabled");$("#txtNumeroInicial").removeAttr("disabled");$("#txtInicioSeguimiento").removeAttr("disabled");$("#txtInicioDefinitivo").attr("disabled",true)}});$("#idFormAgregarAcuerdo\\:checkIndicadorSeleccionHoraFin").on("click",function(){if($("#idFormAgregarAcuerdo\\:checkIndicadorSeleccionHoraFin").is(":checked")){$("#idFormAgregarAcuerdo\\:selTipoTiempoFin").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selTipoTiempoFin option:eq(0)").prop("selected",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesFin").attr("disabled",true);$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesFin option:eq(0)").prop("selected",true);$("#txtNumeroFinal").attr("disabled",true).val("");$("#txtFinSeguimiento").attr("disabled",true).val("");$("#txtFinDefinitivo").removeAttr("disabled")}else{$("#idFormAgregarAcuerdo\\:selTipoTiempoFin").removeAttr("disabled");$("#idFormAgregarAcuerdo\\:selIndicadorAntesDespuesFin").removeAttr("disabled");$("#txtNumeroFinal").removeAttr("disabled");$("#txtFinSeguimiento").removeAttr("disabled");$("#txtFinDefinitivo").attr("disabled",true)}})});</script>
</h:form>
</ui:define>
</ui:composition>
</html>